import { useState } from 'react';
import { FiExternalLink, FiAlertTriangle, FiShield, FiCode, FiMusic, FiZap } from 'react-icons/fi';

interface Exploit {
  cve: string;
  title: string;
  severity: 'CRITICAL' | 'HIGH' | 'MEDIUM';
  description: string;
  affected: string;
  patchStatus: string;
  url: string;
  icon: React.ReactNode;
}

const exploits: Exploit[] = [
  {
    cve: 'CVE-2025-GEMCITY',
    title: 'Unfiltered Tech Discourse',
    severity: 'CRITICAL',
    description: 'Critical vulnerability allowing unfiltered analysis of AI systems, tech culture, and corporate power structures without editorial oversight or VC-approved messaging.',
    affected: 'gemcity.xyz',
    patchStatus: 'Intentionally Unpatched',
    url: 'https://gemcity.xyz',
    icon: <FiZap className="text-yellow-400" />,
  },
  {
    cve: 'CVE-2025-PIXELATED',
    title: 'Emotional Intelligence Injection',
    severity: 'HIGH',
    description: 'Enterprise-grade AI system that actually understands human nuance instead of pattern-matching buzzwords. Bypasses standard corporate AI safety filters.',
    affected: 'pixelatedempathy.com',
    patchStatus: 'Won\'t Fix - Working as Intended',
    url: 'https://pixelatedempathy.com',
    icon: <FiShield className="text-blue-400" />,
  },
  {
    cve: 'CVE-2025-CHADISFACTION',
    title: 'Experimental Code Exposure',
    severity: 'MEDIUM',
    description: 'Unsanitized development environment containing experimental React, TypeScript, and Rust implementations. May cause spontaneous learning.',
    affected: 'chadisfaction.tech',
    patchStatus: 'Deferred - Priority: Discovery',
    url: 'https://chadisfaction.tech',
    icon: <FiCode className="text-green-400" />,
  },
  {
    cve: 'CVE-2025-ACAB',
    title: 'Surveillance Tech Disclosure',
    severity: 'CRITICAL',
    description: 'Documentation of police technology and corporate surveillance convergence. Information hazard for law enforcement and data brokers.',
    affected: 'acab.lol',
    patchStatus: 'Actively Maintained',
    url: 'https://acab.lol',
    icon: <FiAlertTriangle className="text-red-400" />,
  },
  {
    cve: 'CVE-2025-VIVI',
    title: 'Creative Expression Overflow',
    severity: 'MEDIUM',
    description: 'Buffer overflow in creative constraints allowing unrestricted music, art, and cultural production outside algorithmic recommendation systems.',
    affected: 'vivi.rocks',
    patchStatus: 'Feature, Not Bug',
    url: 'https://vivi.rocks',
    icon: <FiMusic className="text-purple-400" />,
  },
  {
    cve: 'CVE-2025-BANTESLA',
    title: 'Critical Corporate Analysis',
    severity: 'HIGH',
    description: 'Satirical examination of tech cults of personality and dangerous automation. May cause cognitive dissonance in fanboys.',
    affected: 'bantesla.lol',
    patchStatus: 'Reproduced Daily',
    url: 'https://bantesla.lol',
    icon: <FiZap className="text-orange-400" />,
  },
];

const severityColors = {
  CRITICAL: 'bg-red-500/20 text-red-400 border-red-500/50',
  HIGH: 'bg-orange-500/20 text-orange-400 border-orange-500/50',
  MEDIUM: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/50',
};

interface ProjectsAsExploitsProps {
  isOpen: boolean;
  onClose: () => void;
}

export default function ProjectsAsExploits({ isOpen, onClose }: ProjectsAsExploitsProps) {
  const [expanded, setExpanded] = useState<string | null>(null);

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/95 z-[100] overflow-y-auto">
      <div className="min-h-screen p-4 md:p-8">
        {/* Header */}
        <div className="max-w-4xl mx-auto mb-8">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h1 className="text-2xl md:text-3xl font-mono font-bold text-white mb-2">
                Security Advisory Database
              </h1>
              <p className="text-gray-500 font-mono text-sm">
                Active exploits in the digital empire // Last updated: {new Date().toISOString().split('T')[0]}
              </p>
            </div>
            <button
              onClick={onClose}
              className="text-gray-500 hover:text-white transition-colors px-4 py-2 border border-gray-700 rounded hover:bg-gray-800"
            >
              [ CLOSE ]
            </button>
          </div>
          
          <div className="flex gap-4 text-xs font-mono border-b border-gray-800 pb-4">
            <span className="text-red-400">● CRITICAL: 3</span>
            <span className="text-orange-400">● HIGH: 2</span>
            <span className="text-yellow-400">● MEDIUM: 1</span>
          </div>
        </div>

        {/* Exploits List */}
        <div className="max-w-4xl mx-auto space-y-4">
          {exploits.map((exploit) => (
            <div
              key={exploit.cve}
              className="border border-gray-800 rounded-lg overflow-hidden bg-gray-900/50 hover:border-gray-700 transition-colors"
            >
              <button
                onClick={() => setExpanded(expanded === exploit.cve ? null : exploit.cve)}
                className="w-full p-4 text-left"
              >
                <div className="flex items-start gap-4">
                  <div className="mt-1">{exploit.icon}</div>
                  <div className="flex-1">
                    <div className="flex items-center gap-3 mb-1">
                      <span className="font-mono text-xs text-gray-500">{exploit.cve}</span>
                      <span className={`text-xs px-2 py-0.5 rounded border font-mono ${severityColors[exploit.severity]}`}>
                        {exploit.severity}
                      </span>
                    </div>
                    <h3 className="text-lg font-semibold text-white mb-1">{exploit.title}</h3>
                    <p className="text-sm text-gray-400">Affected: {exploit.affected}</p>
                  </div>
                  <div className="text-gray-600">
                    {expanded === exploit.cve ? '▼' : '▶'}
                  </div>
                </div>
              </button>
              
              {expanded === exploit.cve && (
                <div className="px-4 pb-4 pl-12 border-t border-gray-800 pt-4">
                  <p className="text-gray-300 mb-4 leading-relaxed">{exploit.description}</p>
                  
                  <div className="grid md:grid-cols-2 gap-4 text-sm">
                    <div>
                      <span className="text-gray-500 font-mono">Patch Status:</span>
                      <p className="text-green-400">{exploit.patchStatus}</p>
                    </div>
                    <div className="flex items-end">
                      <a
                        href={exploit.url}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors"
                      >
                        <span>View Advisory</span>
                        <FiExternalLink size={14} />
                      </a>
                    </div>
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>

        {/* Footer */}
        <div className="max-w-4xl mx-auto mt-8 pt-8 border-t border-gray-800">
          <p className="text-xs text-gray-600 font-mono text-center">
            These "vulnerabilities" are features. No patches will be issued.
            <br />
            For responsible disclosure of actual security issues: security@gemcity.xyz
          </p>
        </div>
      </div>
    </div>
  );
}
